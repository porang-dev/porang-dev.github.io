<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Inflation Monitoring</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js"></script>

  <!-- =======================================================
  * Template Name: Landify
  * Template URL: https://bootstrapmade.com/landify-bootstrap-landing-page-template/
  * Updated: Aug 04 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <h1 class="sitename">Inflation Monitoring with Food Security Index</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#pendahuluan">Pendahuluan</a></li>
          <li><a href="#data">Data</a></li>
          <li><a href="#tahapan-penelitian">Tahapan Penelitian</a></li>
          <li><a href="#hasil">Hasil</a></li>
          <li><a href="#dashboard">Dashboard</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <!-- Hero Section -->
    <section id="hero" class="hero section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row align-items-center">

          <div class="col-lg-6 order-2 order-lg-1" data-aos="fade-right" data-aos-delay="200">
            <div class="hero-content">
              <h1 class="hero-title">Enhancing Inflation Monitoring with Generative AI and Big Data</h1>
              <p class="hero-description">Developing a Granular Quarterly <strong>Food Security Index</strong> <br>
                A Case Study of Five Inflation-Driving Cities in North Sumatera</p>
              <div class="hero-actions">
                <a href="#pendahuluan" class="btn-primary">Mulai Eksplorasi</a>
              </div>
            </div>
          </div>

          <div class="col-lg-6 order-1 order-lg-2" data-aos="fade-left" data-aos-delay="300">
            <div class="hero-visual">
              <div class="hero-image-wrapper">
                <img src="assets/img/illustration/illustration-15.webp" class="img-fluid hero-image" alt="Hero Image">
                <div class="floating-elements">
                  <div class="floating-card card-1">
                    <i class="bi bi-cash"></i>
                    <span>Inflation</span>
                  </div>
                  <div class="floating-card card-2">
                    <i class="bi bi-fork-knife"></i>
                    <span>Food Security</span>
                  </div>
                  <div class="floating-card card-3">
                    <i class="bi bi-database-fill-gear"></i>
                    <span>Big Data</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </section><!-- /Hero Section -->

    <!-- Pendahuluan Section -->
    <section id="pendahuluan" class="about section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-5">

          <div class="col-lg-6" data-aos="fade-right" data-aos-delay="200">
            <div class="content-wrapper">
              <div class="section-header">
                <span class="section-badge">PENDAHULUAN</span>
                <h2>INFLASI DAN KETAHANAN PANGAN</h2>
              </div>

              <p class="lead-text">Ketahanan pangan tidak hanya menjamin akses masyarakat terhadap pangan yang cukup dan bergizi, tetapi juga berperan penting dalam menjaga stabilitas harga dan mengendalikan inflasi</p>

              <p class="description-text">Dalam konteks regional, ketahanan pangan mencerminkan efisiensi logistik, daya saing lokal, dan kesenjangan pembangunan antarwilayah (FAO, 2021; Timmer, 2010). Ketika harga pangan berfluktuasi secara ekstrem, terutama di wilayah-wilayah yang menjadi pemicu inflasi, dampaknya tidak hanya dirasakan oleh konsumen, tetapi juga oleh pembuat kebijakan yang harus merespons secara cepat dan tepat</p>

              <div class="stats-grid">
                <div class="stat-item">
                  <div class="stat-number">Bappenas, 2025</div>
                  <div class="stat-label">Percepatan pertumbuhan ekonomi sangat bergantung pada stabilitas harga dan ketahanan pangan</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number">Nuryantono, 2021</div>
                  <div class="stat-label">Ketahanan pangan menjadi instrumen utama dalam meredam tekanan inflasi</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number">Adem, 2023</div>
                  <div class="stat-label">Ketahanan pangan dapat berubah dalam waktu singkat dan berbeda antar wilayah</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number">Dhaarna & Devadas, 2022</div>
                  <div class="stat-label">Sistem ketahanan pangan dipengaruhi oleh banyak sektor atau aspek</div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-6" data-aos="fade-left" data-aos-delay="300">
            <div class="visual-section">
              <div class="main-image-container">
                <img src="assets/img/about/inflasi.jpeg" alt="Professional team collaboration" class="img-fluid main-visual">
              </div>

              <div class="secondary-images">
                <div class="row g-3">
                  <div class="col-6">
                    <img src="assets/img/about/ketahanan_pangan.jpg" alt="Team meeting" class="img-fluid secondary-img">
                  </div>
                  <div class="col-6">
                    <img src="assets/img/about/ketahanan_pangan_2.jpg" alt="Office workspace" class="img-fluid secondary-img">
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </section><!-- /Pendahuluan Section -->

    <!-- Data Section -->
    <section id="data" class="services section">  

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <span class="description-title">Data yang Digunakan</span>
        <h2>Data yang Digunakan</h2>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row align-items-center">
          <div class="col-lg-6">
            <div class="intro-content" data-aos="fade-right" data-aos-delay="100">
              <h2 class="section-heading mb-4">Causal Loop Diagram</h2>
              <p class="section-description mb-4">Causal Loop Diagram (CLD) digunakan untuk menggambarkan hubungan dan umpan balik antara 4 pilar Quarterly Food Security Index (QFSI) serta 11 indikator terpilih</p>
              <a href="#rincian-data" class="cta-button" data-aos="fade-right" data-aos-delay="200">
                Lihat Rincian Data yang Digunakan
              </a>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="hero-visual" data-aos="fade-left" data-aos-delay="150">
              <div class="image-hover-container" data-bs-toggle="modal" data-bs-target="#imageModalCLD">
                <img src="assets/img/data/causal_loop.png" alt="Causal Loop Diagram" class="img-fluid">
                  <div class="image-hover-overlay">
                    <button class="view-btn" type="button">
                      <i class="bi bi-zoom-in"></i>
                        View Full Image
                    </button>
                  </div>
              </div>
            </div>
          </div>
          
        </div>

        <div id="rincian-data" class="services-grid mt-5">
          <div class="row g-4">
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
              <div class="service-card">
                <div class="card-number">
                  <span>01</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Nighttime Light (NTL)
                  </h5>
                  <p class="service-description faq-content">Data NTL digunakan untuk merepresentasikan aksesibilitas ekonomi melalui intensitas cahaya malam, yang secara empiris berkorelasi dengan tingkat aktivitas ekonomi, kepadatan penduduk, serta distribusi infrastruktur perkotaan</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
              <div class="service-card">
                <div class="card-number">
                  <span>02</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Land Surface Temperature (LST)
                  </h5>
                  <p class="service-description">Data LST digunakan untuk menggambarkan suhu permukaan tanah sebagai salah satu indikator kondisi lingkungan dan kenyamanan termal, yang secara tidak langsung juga berhubungan dengan kualitas akses dan infrastruktur perkotaan</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>03</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Normalized Difference Build-up Index (NDBI)
                  </h5>
                  <p class="service-description">Data NDBI dimanfaatkan untuk mengidentifikasi serta memetakan area terbangun dan tingkat kepadatannya, yang merefleksikan keterhubungan infrastruktur fisik dan ketersediaan sarana penunjang akses</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
              <div class="service-card">
                <div class="card-number">
                  <span>04</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Normalized Difference Vegetation Index (NDVI)
                  </h5>
                  <p class="service-description">Data NDVI digunakan untuk merepresentasikan tingkat kesehatan dan produktivitas vegetasi, yang mencerminkan potensi ketersediaan sumber pangan berbasis tanaman</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
              <div class="service-card">
                <div class="card-number">
                  <span>05</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Persentase Lahan Pangan (Foodland)
                  </h5>
                  <p class="service-description">Data persentase lahan pangan digunakan sebagai indikator luasan areal pertanian yang berfungsi dalam penyediaan pangan utama</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>06</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Curah Hujan (Rainfall)
                  </h5>
                  <p class="service-description">Data curah hujan digunakan untuk merepresentasikan ketersediaan sumber daya air sebagai faktor penentu keberlangsungan produksi pertanian</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>07</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Suhu Maksimum Harian
                  </h5>
                  <p class="service-description">Data suhu maksimum harian dimanfaatkan untuk merepresentasikan kondisi termal ekstrem di permukaan bumi, yang berpengaruh langsung terhadap kualitas pangan, serta daya tahan sistem pertanian</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>08</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Normalized Difference Water Index (NDWI)
                  </h5>
                  <p class="service-description">Data NDWI digunakan untuk merepresentasikan kandungan kelembaban vegetasi serta ketersediaan air permukaan, yang menjadi indikator penting dalam menentukan kualitas lahan pertanian dan tingkat efisiensi pemanfaatan sumber daya air</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>09</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Fire Hotspot
                  </h5>
                  <p class="service-description">Data fire hotspot digunakan untuk mengidentifikasi sebaran titik panas yang berpotensi merepresentasikan kejadian kebakaran hutan maupun lahan sebagai bentuk peristiwa ekstrem yang dapat mengganggu stabilitas produksi pangan</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>10</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Palmer Drought Severity Index (PDSI)
                  </h5>
                  <p class="service-description">Data PDSI dimanfaatkan untuk merepresentasikan tingkat keparahan kekeringan melalui kombinasi informasi curah hujan, kelembaban tanah, serta kondisi iklim jangka panjang</p>
                </div>
              </div>
            </div><!-- End Service Card -->

            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
              <div class="service-card">
                <div class="card-number">
                  <span>11</span>
                </div>
                <div class="card-content">
                  <h5 class="service-title">
                    Konsentrasi Nitrogen Dioksida (NO2)
                  </h5>
                  <p class="service-description">Data konsentrasi NO₂ digunakan untuk merepresentasikan tingkat polusi udara yang erat kaitannya dengan aktivitas antropogenik, khususnya pembakaran bahan bakar fosil dan kegiatan industri, yang berpotensi memengaruhi kualitas ekosistem pertanian</p>
                </div>
              </div>
            </div><!-- End Service Card -->

          </div>
        </div>

      </div>

    </section><!-- /Data Section -->

    <!-- Tahapan Penelitian Section -->
    <section id="tahapan-penelitian" class="features-2 section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <span class="description-title">Tahapan Penelitian</span>
        <h2>Tahapan Penelitian</h2>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="feature-testimonial" data-aos="fade-up" data-aos-delay="300">
          <div class="row align-items-center">
            
            <div class="col-lg-6" data-aos="zoom-in">
              <div class="testimonial-image">
                <div class="image-hover-container" data-bs-toggle="modal" data-bs-target="#tahapanModal">
                  <img src="assets/img/tahapan_penelitian/tahapan-penelitian-sumatranomics.png" alt="Tahapan Penelitian" class="img-fluid">
                  <div class="image-hover-overlay">
                    <button class="view-btn" type="button">
                      <i class="bi bi-zoom-in"></i>
                      View Full Image
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6" data-aos="fade-up" data-aos-delay="200">
              <div class="testimonial-content">
                <div class="check-icon">
                  <i class="bi bi-check-circle-fill"></i>
                </div>
                <h5 class="service-title">
                  Pengumpulan Data
                </h5>
              </div>
              <div class="testimonial-content">
                <div class="check-icon">
                  <i class="bi bi-check-circle-fill"></i>
                </div>
                <h5 class="service-title">
                  Penyusunan Quarterly Food Security Index
                </h5>
              </div>
              <div class="testimonial-content">
                <div class="check-icon">
                  <i class="bi bi-check-circle-fill"></i>
                </div>
                <h5 class="service-title">
                  Analisis Deskriptif, Causal Loop Diagram, Transisi Matriks, dan Spells
                </h5>
              </div>
              <div class="testimonial-content">
                <div class="check-icon">
                  <i class="bi bi-check-circle-fill"></i>
                </div>
                <h5 class="service-title">
                  Sisitem Monitoring (Dashboard dan Smart Chatbot)
                </h5>
              </div>
            </div>
          </div>
        </div>

      </div>

    </section><!-- /Tahapan Penelitian Section -->

    <!-- Hasil Section -->
    <section id="hasil" class="features section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <span class="description-title">Hasil</span>
        <h2>Hasil</h2>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="tabs-wrapper">
          <ul class="nav nav-tabs" data-aos="fade-up" data-aos-delay="100">

            <li class="nav-item">
              <a class="nav-link active show" data-bs-toggle="tab" data-bs-target="#features-tab-1">
                <div class="tab-icon">
                  <i class="bi bi-caret-right-square-fill"></i>
                </div>
                <div class="tab-content">
                  <h5>Perkembangan QFSI Kabupaten/Kota</h5>
                </div>
              </a>
            </li><!-- End tab nav item -->

            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#features-tab-2">
                <div class="tab-icon">
                  <i class="bi bi-caret-right-square-fill"></i>
                </div>
                <div class="tab-content">
                  <h5>Dinamika Status QFSI Desa</h5>
                </div>
              </a>
            </li><!-- End tab nav item -->

            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#features-tab-3">
                <div class="tab-icon">
                  <i class="bi bi-caret-right-square-fill"></i>
                </div>
                <div class="tab-content">
                  <h5>Pengaruh QFSI Terhadap Inflasi</h5>
                </div>
              </a>
            </li><!-- End tab nav item -->

          </ul>

          <div class="tab-content" data-aos="fade-up" data-aos-delay="200">

            <div class="tab-pane fade active show" id="features-tab-1">
              <div class="carousel-container">
                <div class="carousel-nav prev">
                  <button onclick="navigateCarousel('tab1', -1)">
                    <i class="bi bi-chevron-left"></i>
                  </button>
                </div>

                <div class="carousel-wrapper" id="carousel-tab1">
                  <!-- Slide 1 -->
                  <div class="carousel-slide active">
                    <div class="row align-items-center">
                      <div class="col-lg-5">
                        <div class="content-wrapper">
                          <h3>Perkembangan QFSI Kota Q1 2022 - Q4 2024</h3>
                          <p>Ketahanan pangan di lima kota inflasi Provinsi Sumatera Utara cenderung menunjukkan pola fluktuatif dari satu periode ke periode berikutnya. Hal ini menunjukkan ketahanan pangan merupakan fenomena dan ukuran kesejahteraan yang dinamis.</p>
                          <div class="feature-grid">
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>QFSI di Medan dan Pematang Siantar tergolong stabil.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>QFSI Gunungsitoli dan Padang Sidempuan cenderung fluktuatif.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Kota-kota dengan fluktuasi tinggi memerlukan penanganan khusus.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Kebijakan pangan perlu disesuaikan dengan karakteristik setiap wilayah.</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-7">
                        <div class="visual-content">
                          <div class="chart-container">
                            <!-- Filter Controls -->
                            <div class="chart-filters mb-3">
                              <div class="row align-items-center">
                                <div class="col-md-5">
                                  <label for="startQuarter" class="form-label">Dari:</label>
                                  <select id="startQuarter" class="form-select form-select-sm">
                                    <option value="0">Q1 2022</option>
                                    <option value="1">Q2 2022</option>
                                    <option value="2">Q3 2022</option>
                                    <option value="3">Q4 2022</option>
                                    <option value="4">Q1 2023</option>
                                    <option value="5">Q2 2023</option>
                                    <option value="6">Q3 2023</option>
                                    <option value="7">Q4 2023</option>
                                    <option value="8">Q1 2024</option>
                                    <option value="9">Q2 2024</option>
                                    <option value="10">Q3 2024</option>
                                    <option value="11">Q4 2024</option>
                                  </select>
                                </div>
                                <div class="col-md-5">
                                  <label for="endQuarter" class="form-label">Sampai:</label>
                                  <select id="endQuarter" class="form-select form-select-sm">
                                    <option value="0">Q1 2022</option>
                                    <option value="1">Q2 2022</option>
                                    <option value="2">Q3 2022</option>
                                    <option value="3">Q4 2022</option>
                                    <option value="4">Q1 2023</option>
                                    <option value="5">Q2 2023</option>
                                    <option value="6">Q3 2023</option>
                                    <option value="7">Q4 2023</option>
                                    <option value="8">Q1 2024</option>
                                    <option value="9">Q2 2024</option>
                                    <option value="10">Q3 2024</option>
                                    <option value="11" selected>Q4 2024</option>
                                  </select>
                                </div>
                                <div class="col-md-2">
                                  <label class="form-label d-none d-md-block">&nbsp;</label>
                                  <button id="resetFilter" class="btn btn-secondary btn-sm w-100">Reset</button>
                                </div>
                              </div>
                            </div>
                            
                            <!-- Canvas Chart -->
                            <div class="chart-wrapper">
                              <canvas id="qfsiChart"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Slide 2 -->
                  <div class="carousel-slide">
                    <div class="row align-items-center">
                      <div class="col-lg-5">
                        <div class="content-wrapper">
                          <h3>Perkembangan QFSI 2022-2023</h3>
                          <p>Selain bersifat dinamis dan kontekstual, ketahanan pangan juga bersifat multidimensi. Sehingga dalam membuat kebijakan yang efektif, perlu dipahami pilar-pilar yang menjadi kelemahan masing-masing kota</p>
                          <div class="feature-grid">
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Suatu kota bisa rawan pangan pada pilar tertentu saja.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Misalnya, Kota Medan menempati posisi tertinggi dalam pilar akses pangan.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Namun, Kota Medan memiliki skor terendah pada ketersediaan dan kestabilan pangan.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Sehingga, kebijakan pangan Medan sebaiknya fokus pada lingkungan dan cadangan pangan.</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-7">
                        <div class="visual-content">
                          <div class="multi-chart-container">
                            <!-- Filter Controls -->
                            <div class="chart-filters mb-3">
                              <div class="row align-items-center">
                                <div class="col-md-5">
                                  <label for="startQuarterPillar" class="form-label">Dari:</label>
                                  <select id="startQuarterPillar" class="form-select form-select-sm">
                                    <option value="0">Q1 2022</option>
                                    <option value="1">Q2 2022</option>
                                    <option value="2">Q3 2022</option>
                                    <option value="3">Q4 2022</option>
                                    <option value="4">Q1 2023</option>
                                    <option value="5">Q2 2023</option>
                                    <option value="6">Q3 2023</option>
                                    <option value="7">Q4 2023</option>
                                    <option value="8">Q1 2024</option>
                                    <option value="9">Q2 2024</option>
                                    <option value="10">Q3 2024</option>
                                    <option value="11">Q4 2024</option>
                                  </select>
                                </div>
                                <div class="col-md-5">
                                  <label for="endQuarterPillar" class="form-label">Sampai:</label>
                                  <select id="endQuarterPillar" class="form-select form-select-sm">
                                    <option value="0">Q1 2022</option>
                                    <option value="1">Q2 2022</option>
                                    <option value="2">Q3 2022</option>
                                    <option value="3">Q4 2022</option>
                                    <option value="4">Q1 2023</option>
                                    <option value="5">Q2 2023</option>
                                    <option value="6">Q3 2023</option>
                                    <option value="7">Q4 2023</option>
                                    <option value="8">Q1 2024</option>
                                    <option value="9">Q2 2024</option>
                                    <option value="10">Q3 2024</option>
                                    <option value="11" selected>Q4 2024</option>
                                  </select>
                                </div>
                                <div class="col-md-2">
                                  <label class="form-label d-none d-md-block">&nbsp;</label>
                                  <button id="resetFilterPillar" class="btn btn-secondary btn-sm w-100">Reset</button>
                                </div>
                              </div>
                            </div>

                            <!-- Charts Grid -->
                            <div class="charts-grid">
                              <!-- Accessibility Chart -->
                              <div class="chart-box">
                                <h5 class="chart-title">Accessibility</h5>
                                <div class="chart-wrapper-small">
                                  <canvas id="accessibilityChart"></canvas>
                                </div>
                              </div>

                              <!-- Availability Chart -->
                              <div class="chart-box">
                                <h5 class="chart-title">Availability</h5>
                                <div class="chart-wrapper-small">
                                  <canvas id="availabilityChart"></canvas>
                                </div>
                              </div>

                              <!-- Utilization Chart -->
                              <div class="chart-box">
                                <h5 class="chart-title">Utilization</h5>
                                <div class="chart-wrapper-small">
                                  <canvas id="utilizationChart"></canvas>
                                </div>
                              </div>

                              <!-- Stability Chart -->
                              <div class="chart-box">
                                <h5 class="chart-title">Stability</h5>
                                <div class="chart-wrapper-small">
                                  <canvas id="stabilityChart"></canvas>
                                </div>
                              </div>
                            </div>

                            <!-- Shared Legend -->
                            <div class="shared-legend">
                              <div class="legend-item" data-city="0" onclick="toggleCity(0)">
                                <span class="legend-circle" style="border-color: #3dccc7; background-color: rgba(61, 204, 199, 0.4);"></span>
                                <span class="legend-label">Medan</span>
                              </div>
                              <div class="legend-item" data-city="1" onclick="toggleCity(1)">
                                <span class="legend-circle" style="border-color: #2fbead; background-color: rgba(47, 190, 173, 0.4);"></span>
                                <span class="legend-label">Pematang Siantar</span>
                              </div>
                              <div class="legend-item" data-city="2" onclick="toggleCity(2)">
                                <span class="legend-circle" style="border-color: #007279; background-color: rgba(0, 114, 121, 0.4);"></span>
                                <span class="legend-label">Sibolga</span>
                              </div>
                              <div class="legend-item" data-city="3" onclick="toggleCity(3)">
                                <span class="legend-circle" style="border-color: #cca30d; background-color: rgba(204, 163, 13, 0.4);"></span>
                                <span class="legend-label">Padang Sidimpuan</span>
                              </div>
                              <div class="legend-item" data-city="4" onclick="toggleCity(4)">
                                <span class="legend-circle" style="border-color: #ffeb9c; background-color: rgba(255, 235, 156, 0.4);"></span>
                                <span class="legend-label">Gunungsitoli</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="carousel-nav next">
                  <button onclick="navigateCarousel('tab1', 1)">
                    <i class="bi bi-chevron-right"></i>
                  </button>
                </div>
              </div>

              <div class="carousel-indicators" id="indicators-tab1"></div>
            </div>

            <div class="tab-pane fade" id="features-tab-2">
              <div class="carousel-container">
                <div class="carousel-nav prev">
                  <button onclick="navigateCarousel('tab2', -1)">
                    <i class="bi bi-chevron-left"></i>
                  </button>
                </div>

                <div class="carousel-wrapper" id="carousel-tab2">
                  <!-- Slide 1 -->
                  <div class="carousel-slide active">
                    <div class="row align-items-center">
                      <div class="col-lg-5">
                        <div class="content-wrapper">
                          <h3>Transition Matrix Q1 2O22 – Q4 2024</h3>
                          <p>Nilai QFSI kota yang tinggi tidak menjamin semua desa serta penduduk di dalamnya juga tahan pangan. Untuk mengidentifikasi desa yang rawan pangan, dilakukan klasifikasi status QFSI desa menjadi food-insecure dan food-secure. Penelitian ini menggunakan nilai rata-rata indeks setiap triwulan sebagai cut-off pengklasifikasian.</p>
                          <div class="feature-grid">
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Tidak semua desa yang tahan pangan pada Q1 2024 tetap seperti itu pada Q4 2024.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Terjadi mobilitas stastus pangan desa, baik menuju rawan pangan atau sebaliknya.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Menggambarkan dinamika pergerakan status pangan.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Pemerintah dapat mengidentifikasi desa yang rentan dan yang mudah kembali rawan pangan.</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-7">
                        <div class="visual-content">
                          <div class="food-security-container">
                            <div class="filter-section">
                              <label class="filter-label">Pilih Kabupaten/Kota:</label>
                              <select id="kotaSelect1" class="filter-select">
                                <option value="0">Kota Gunungsitoli</option>
                                <option value="1">Kota Padang Sidempuan</option>
                                <option value="2">Kota Medan</option>
                                <option value="3">Kota Pematangsiantar</option>
                                <option value="4">Kota Sibolga</option>
                              </select>
                            </div>

                            <div class="table-wrapper">
                              <table class="data-table">
                                <thead>
                                  <tr>
                                    <th rowspan="2">Kabupaten/kota</th>
                                    <th rowspan="2">Q1-2022</th>
                                    <th colspan="3">Q4-2024</th>
                                  </tr>
                                  <tr>
                                    <th>Food-insecure %</th>
                                    <th>Food-secure %</th>
                                    <th>Total</th>
                                  </tr>
                                </thead>
                                <tbody id="tableBody1"></tbody>
                              </table>
                            </div>

                            <div class="info-box">
                              <p>
                                <span class="label">Keterangan:</span> Tabel menampilkan dinamika status ketahanan pangan dari Q1-2022 ke Q4-2024. 
                                Persentase menunjukkan transisi antara status food-insecure dan food-secure.
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Slide 2 -->
                  <div class="carousel-slide">
                    <div class="row align-items-center">
                      <div class="col-lg-5">
                        <div class="content-wrapper">
                          <h3>Spells Analysis of QFSI Movement</h3>
                          <p>Penelitian ini menggunakan metode spells untuk memperhitungkan durasi setiap desa mengalami kerawanan pangan. Desa yang tiga tahun berturut-turut (2022-2024) berada dalam kondisi tahan pangan diklasifikasikan sebagai consistently food-secure, sedangkan desa dengan tiga periode kerawanan pangan digolongkan sebagai chronically food-insecure. Sementara itu, desa yang mengalami setidaknya satu kali periode tahan pangan namun juga pernah masuk kondisi rawan pangan digolongkan sebagai transitorily food-insecure.</p>
                          <div class="feature-grid">
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Desa dengan chronically food-insecure memerlukan perhatian utama pemerintah.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Desa-desa tersebut menunjukkan kerentanan pangan dalam jangka yang lebih panjang.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Jika berlangsung terus menerus dapat dikaitkan dengan kemiskinan struktural.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Intervensi harus mencakup peningkatan pendidikan, lapangan kerja, dan akses layanan publik.</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-7">
                        <div class="transition-container">
                          <div class="filter-section">
                            <label class="filter-label">Pilih Kabupaten/Kota:</label>
                            <select id="kotaSelect2" class="filter-select">
                              <option value="0">Kota Gunungsitoli</option>
                              <option value="1">Kota Padang Sidempuan</option>
                              <option value="2">Kota Medan</option>
                              <option value="3">Kota Pematangsiantar</option>
                              <option value="4">Kota Sibolga</option>
                            </select>
                          </div>

                          <div class="table-wrapper">
                            <table class="transition-table">
                              <thead>
                                <tr>
                                  <th>Kab/kota</th>
                                  <th>Category</th>
                                  <th>Movement<br>(2022→2023→2024)</th>
                                  <th>Food<br>Secure<br>Spells</th>
                                  <th>Food<br>Insecure<br>Spells</th>
                                  <th>Frek</th>
                                  <th>%</th>
                                  <th>%<br>Kum</th>
                                </tr>
                              </thead>
                              <tbody id="tableBody2">
                                <!-- Data akan diisi oleh JavaScript -->
                              </tbody>
                            </table>
                          </div>

                          <div class="info-box">
                            <p>
                              <span class="label">Keterangan:</span> Tabel menampilkan pola transisi status ketahanan pangan dari tahun 2022 hingga 2024. 
                              FS = Food Secure, FI = Food Insecure. Persentase kumulatif menunjukkan distribusi kategori ketahanan pangan di setiap wilayah.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="carousel-nav next">
                  <button onclick="navigateCarousel('tab2', 1)">
                    <i class="bi bi-chevron-right"></i>
                  </button>
                </div>
              </div>

              <div class="carousel-indicators" id="indicators-tab2"></div>
            </div>

            <div class="tab-pane fade" id="features-tab-3">
              <div class="carousel-container">
                <div class="carousel-nav prev">
                  <button onclick="navigateCarousel('tab3', -1)">
                    <i class="bi bi-chevron-left"></i>
                  </button>
                </div>

                <div class="carousel-wrapper" id="carousel-tab3">
                  <!-- Slide 1 -->
                  <div class="carousel-slide active">
                    <div class="row align-items-center">
                      <div class="col-lg-5">
                        <div class="content-wrapper">
                          <h3>Model Panel Dinamis</h3>
                          <p>Inflasi yang mempengaruhi ketahanan pangan, juga dipengaruhi oleh ketahanan pangan pada periode sekarang maupun beberapa periode sebelumnya. Untuk mengetahui pengaruh ketahanan pangan periode berjalan dan periode sebelumnya terhadap inflasi, dilakukan analisis data panel dinamis dengan memasukan lag inflasi dan lag ketahanan pangan sebagai variabel independen dalam model.</p>
                          <div class="feature-grid">
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Perilaku inflasi bersifat dinamis dan dipengaruhi oleh kondisi inflasi dan ketahanan pangan pada periode sebelumnya</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Inflasi dua periode sebelumnya memiliki pengaruh negatif yang signifikan.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Lonjakan inflasi yang terjadi dua periode sebelumnya akan menyesuaikan harga dan menekan inflasi diperiode berjalan.</span>
                            </div>
                            <div class="feature-item">
                              <i class="bi bi-check-circle-fill"></i>
                              <span>Dinamika inflasi tidak bersifat linier, melainkan menunjukkan siklus korektif.</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-7">
                        <div class="visual-content">
                          <div class="main-image">
                            <img src="assets\img\hasil-dan-pembahasan\formula-matematis.png" alt="Formula Matematis" class="img-fluid">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="carousel-nav next">
                  <button onclick="navigateCarousel('tab3', 1)">
                    <i class="bi bi-chevron-right"></i>
                  </button>
                </div>
              </div>

              <div class="carousel-indicators" id="indicators-tab3"></div>
            </div>

          </div>
        </div>

      </div>

    </section><!-- /Hasil Section -->

    <!-- Dashboard Section -->
    <section id="dashboard" class="call-to-action section dark-background">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row align-items-lg-center">
          <div class="col-lg-5 order-lg-2" data-aos="fade-left" data-aos-delay="200">
            <div class="image-wrapper position-relative">
              <div class="floating-card">
                <i class="bi bi-bar-chart-line-fill"></i>
                <h4>Monitoring Inflasi dan QFSI</h4>
                <p>Rangkuman data QFSI dan inflasi di lima kota inflasi Provinsi Sumatera Utara</p>
              </div>
              <img src="assets/img/dashboard/preview-dashboard.png" alt="Security Solutions" class="img-fluid main-image">
            </div>
          </div>

          <div class="col-lg-6 offset-lg-1 order-lg-1" data-aos="fade-right" data-aos-delay="100">
            <div class="content-area">
              <h2>Dashboard Monitoring</h2>
              <p>Akses mudah dan interaktif untuk mengetahui dan memantau informasi terkini mengenai inflasi dan QFSI di lima kota inflasi Provinsi Sumatera Utara</p>

              <div class="cta-wrapper">
                <a href="dashboard.html" class="btn btn-cta">Explore Dashboard</a>
              </div>
            </div>
          </div>

        </div>

      </div>

    </section><!-- /Dashboard Section -->

    <!-- Kesimpulan Section -->
    <section id="stats" class="stats section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <span class="description-title">Kesimpulan</span>
        <h2>Kesimpulan</h2>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="stats-grid">
          <div class="row g-4">
            <div class="col-xl-4 col-lg-4 col-md-4" data-aos="fade-up" data-aos-delay="100">
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="bi bi-arrows-move"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Ketahanan Pangan Bersifat Dinamis</div>
                  <div class="stat-growth">
                    Ketahanan pangan bersifat dinamis secara spasial-temporal sehingga perlu dimonitoring secara berkala dengan didukung oleh QFSI yang dapat memberikan gambaran terkait daerah yang rawan pangan atau beresiko menjadi rawan pangan secara cepat, granular, dan dinamis.
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-4 col-lg-4 col-md-4" data-aos="fade-up" data-aos-delay="300">
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="bi bi-gear-wide-connected"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Ketahanan Pangan Berpengaruh Terhadap Pengendalian Inflasi</div>
                  <div class="stat-growth">
                    Ketahanan pangan berpengaruh terhadap pengendalian inflasi melalui lag effect, sehingga kebijakan pengendalian inflasi terutama pada komoditas pangan strategis, perlu disinergikan dengan program penguatan ketahanan pangan.
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-4 col-lg-4 col-md-4" data-aos="fade-up" data-aos-delay="400">
              <div class="stat-item">
                <div class="stat-icon">
                  <i class="bi bi-chevron-double-right"></i>
                </div>
                <div class="stat-content">
                  <div class="stat-label">Pengembangan Selanjutnya</div>
                  <div class="stat-growth">
                    Pegembangan selanjutnya dari penelitian ini adalah melanjutkan pembangunan QFSI untuk seluruh kota inflasi di Indonesia serta menambahkan indikator atau informasi lainnya yang belum tercakup dalam penelitian ini.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </section><!-- /Kesimpulan Section -->

    <!-- Modal untuk menampilkan gambar penuh -->
    <div class="modal fade" id="imageModalCLD" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">
                        <i class="bi bi-diagram-3-fill me-2"></i>
                        Causal Loop Diagram - Full View
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="assets/img/data/causal_loop.png" alt="Causal Loop Diagram Full Size" class="modal-image">
                </div>
            </div>
        </div>
    </div>

    <!-- Modal untuk menampilkan gambar tahapan penelitian -->
    <div class="modal fade" id="tahapanModal" tabindex="-1" aria-labelledby="tahapanModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tahapanModalLabel">
              <i class="bi bi-diagram-2-fill me-2"></i>
              Tahapan Penelitian - Full View
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <img src="assets/img/tahapan_penelitian/tahapan-penelitian-sumatranomics.png" alt="Tahapan Penelitian Full Size" class="modal-image">
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Chat Widget -->
  <div class="chat-widget">
    <button class="chat-toggle" id="chatToggle">
      <i class="bi bi-chat-dots-fill" id="chatIcon"></i>
    </button>
        
    <div class="chat-container" id="chatContainer">
      <div class="chat-header">
        <button class="chat-close" id="chatClose">×</button>
          <h4>Chat dengan Asisten Cerdas</h4>
      </div>
            
      <div class="chat-messages" id="chatMessages">
        <div class="welcome-message">
          <p>👋 Halo! Saya adalah asisten virtual untuk Inflation Monitoring dengan Quarterly Food Security Index. Ada yang bisa saya bantu?</p>
        </div>
      </div>
            
      <div class="typing-indicator" id="typingIndicator">
        <span>Sedang mengetik</span>
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
      </div>
            
      <div class="chat-input-container">
        <textarea class="chat-input" id="chatInput" placeholder="Masukkan pertanyaan Anda di sini..." rows="1"></textarea>
          <button class="chat-send" id="chatSend">
            <span><i class="bi bi-send-fill"></i></span>
          </button>
      </div>
    </div>
  </div>

  <script>
    class ChatWidget {
      constructor() {
        // URL WEBHOOK N8N
        this.webhookUrl = 'https://n8n-syvfpi8xe185.rendang.sumopod.my.id/webhook/chat';
                  
        this.isOpen = false;
        this.sessionId = this.generateSessionId();
        this.initializeElements();
        this.attachEventListeners();
        this.autoResizeTextarea();
      }

      generateSessionId() {
        return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      }

      initializeElements() {
        this.chatToggle = document.getElementById('chatToggle');
        this.chatContainer = document.getElementById('chatContainer');
        this.chatClose = document.getElementById('chatClose');
        this.chatMessages = document.getElementById('chatMessages');
        this.chatInput = document.getElementById('chatInput');
        this.chatSend = document.getElementById('chatSend');
        this.chatIcon = document.getElementById('chatIcon');
        this.typingIndicator = document.getElementById('typingIndicator');
        this.chatInputContainer = this.chatInput.parentElement;
      }

      attachEventListeners() {
        this.chatToggle.addEventListener('click', () => this.toggleChat());
        this.chatClose.addEventListener('click', () => this.closeChat());
        this.chatSend.addEventListener('click', () => this.sendMessage());
                  
        this.chatInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            this.sendMessage();
          }
        });

        this.chatInput.addEventListener('input', () => {
          this.adjustTextareaHeight();
        });

        // Close chat when clicking outside
        document.addEventListener('click', (e) => {
          if (!this.chatToggle.contains(e.target) && 
            !this.chatContainer.contains(e.target) && this.isOpen) {
                // Uncomment if you want to close on outside click
                // this.closeChat();
              }
          });
      }

      autoResizeTextarea() {
        this.chatInput.style.height = 'auto';
        this.chatInput.style.height = Math.min(this.chatInput.scrollHeight, 80) + 'px';
      }

      adjustTextareaHeight() {
        // Reset height untuk mendapatkan scrollHeight yang akurat
        this.chatInput.style.height = 'auto';
                
        // Hitung tinggi baru berdasarkan content
        const scrollHeight = this.chatInput.scrollHeight;
        const newHeight = Math.max(44, Math.min(scrollHeight, 120));
                
        // Set height baru untuk textarea
        this.chatInput.style.height = newHeight + 'px';
                
        // Hitung dan set height untuk container
        const containerPadding = 30; // 15px top + 15px bottom
        const sendButtonHeight = 44;
        const containerHeight = Math.max(newHeight, sendButtonHeight) + containerPadding;
                
        // Reset container style jika textarea kembali ke ukuran minimum
        if (newHeight <= 44) {
            this.chatInputContainer.style.height = 'auto';
        } else {
            this.chatInputContainer.style.height = containerHeight + 'px';
        }
                
        // Handle overflow untuk textarea
        if (newHeight >= 120) {
          this.chatInput.style.overflowY = 'auto';
        } else {
          this.chatInput.style.overflowY = 'hidden';
        }
                
        // Update chat messages height untuk mengkompensasi perubahan container
        this.updateMessagesHeight();
      }

      updateMessagesHeight() {
        // Delay sedikit untuk memastikan DOM sudah update
        setTimeout(() => {
          const containerHeight = this.chatContainer.offsetHeight;
          const headerHeight = 80; // approximate header height
          const inputContainerHeight = this.chatInputContainer.offsetHeight;
          
          // Hitung tinggi typing indicator jika sedang aktif
          const typingIndicatorHeight = this.typingIndicator.classList.contains('active') 
            ? this.typingIndicator.offsetHeight + 16 // tambah margin/padding
            : 0;
          
          // Kurangi tinggi messages dengan typing indicator height
          const messagesHeight = containerHeight - headerHeight - inputContainerHeight - typingIndicatorHeight;
                    
          this.chatMessages.style.height = Math.max(messagesHeight, 200) + 'px';
        }, 10);
      }

      toggleChat() {
        if (this.isOpen) {
          this.closeChat();
        } else {
          this.openChat();
        }
      }

      openChat() {
        this.isOpen = true;
        this.chatContainer.classList.add('active');
        this.chatToggle.classList.add('active');
        this.chatIcon.className = 'bi bi-x-circle-fill';
        this.chatInput.focus();
      }

      closeChat() {
        this.isOpen = false;
        this.chatContainer.classList.remove('active');
        this.chatToggle.classList.remove('active');
        this.chatIcon.className = 'bi bi-chat-dots-fill';
      }

      addMessage(content, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
                  
        const bubbleDiv = document.createElement('div');
        bubbleDiv.className = 'message-bubble';
        
        if (isUser) {
          // User messages displayed as plain text
          bubbleDiv.textContent = content;
          messageDiv.appendChild(bubbleDiv);
          this.chatMessages.appendChild(messageDiv);
          this.scrollToBottom();
        } else {
          // Bot messages with typing effect
          messageDiv.appendChild(bubbleDiv);
          this.chatMessages.appendChild(messageDiv);
          this.scrollToBottom();
          this.typeMessage(bubbleDiv, content);
        }
                  
        messageDiv.appendChild(bubbleDiv);
        this.chatMessages.appendChild(messageDiv);
        this.scrollToBottom();
      }

      typeMessage(element, content) {
        // Parse markdown first to get the final HTML
        const finalHTML = this.parseMarkdown(content);
                
        // Create a temporary element to extract plain text for typing
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = finalHTML;
        const plainText = tempDiv.textContent || tempDiv.innerText || '';
                
        // Clear the element and add typing cursor class
        element.innerHTML = '';
        element.classList.add('typing-cursor');
                
        let currentIndex = 0;
        const typingSpeed = 30; // milliseconds per character
                
        const typeNextCharacter = () => {
          if (currentIndex < plainText.length) {
            // Get current portion of plain text
            const currentText = plainText.substring(0, currentIndex + 1);
                        
            // Create temp element to get corresponding HTML
            const progress = currentIndex + 1;
            const htmlProgress = this.getProgressiveHTML(finalHTML, progress);
                        
            element.innerHTML = htmlProgress;
            currentIndex++;
                        
            // Continue typing
            setTimeout(typeNextCharacter, typingSpeed);
            this.scrollToBottom();
          } else {
            // Typing complete, remove cursor and ensure final HTML is correct
            element.classList.remove('typing-cursor');
            element.innerHTML = finalHTML;
            this.scrollToBottom();
          }
        };
                
        // Start typing after a short delay
        setTimeout(typeNextCharacter, 100);
      }

      getProgressiveHTML(fullHTML, targetLength) {
        // Create temporary element to work with
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = fullHTML;
                
        // Get plain text to count characters
        const fullText = tempDiv.textContent || tempDiv.innerText || '';
                
        if (targetLength >= fullText.length) {
          return fullHTML;
        }
                
        // Calculate ratio of progress
        const ratio = targetLength / fullText.length;
                
        // Simple approach: truncate HTML and try to maintain basic formatting
        let currentLength = 0;
        let result = '';
                
        const processNode = (node) => {
          if (currentLength >= targetLength) return false;
                    
          if (node.nodeType === Node.TEXT_NODE) {
            const text = node.textContent;
            const remainingLength = targetLength - currentLength;
                        
            if (text.length <= remainingLength) {
              result += text;
              currentLength += text.length;
            } else {
              result += text.substring(0, remainingLength);
              currentLength = targetLength;
              return false;
            }
          } else if (node.nodeType === Node.ELEMENT_NODE) {
            const tagName = node.tagName.toLowerCase();
            const openTag = `<${tagName}>`;
            const closeTag = `</${tagName}>`;
                        
            result += openTag;
                        
            for (let child of node.childNodes) {
              if (!processNode(child)) break;
            }
                        
            result += closeTag;
          }
                    
          return true;
        };
                
        for (let child of tempDiv.childNodes) {
          if (!processNode(child)) break;
        }
                
        return result || fullHTML.substring(0, targetLength * 2); // Fallback
      }

      parseMarkdown(text) {
        // Escape HTML to prevent XSS attacks
        text = this.escapeHtml(text);
                
        // Parse markdown formatting
        text = text
            // Bold text: **text** or __text__
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/__(.*?)__/g, '<strong>$1</strong>')
                    
            // Italic text: *text* or _text_
            .replace(/(?<!\*)\*(?!\*)([^*]+)\*(?!\*)/g, '<em>$1</em>')
            .replace(/(?<!_)_(?!_)([^_]+)_(?!_)/g, '<em>$1</em>')
                    
            // Inline code: `code`
            .replace(/`([^`]+)`/g, '<code>$1</code>')
                    
            // Strikethrough: ~~text~~
            .replace(/~~(.*?)~~/g, '<del>$1</del>')
                    
            // Line breaks
            .replace(/\n/g, '<br>')
                    
            // Simple bullet points: - item or * item
            .replace(/^[\-\*]\s+(.+)$/gm, '<li>$1</li>')
                    
            // Numbered lists: 1. item
            .replace(/^\d+\.\s+(.+)$/gm, '<li>$1</li>');
                
        // Wrap consecutive <li> elements in <ul>
        text = text.replace(/(<li>.*<\/li>)/s, function(match) {
            const items = match.match(/<li>.*?<\/li>/g);
            if (items && items.length > 0) {
              return '<ul>' + items.join('') + '</ul>';
            }
            return match;
        });
                
        return text;
      }

      escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }

      showTyping() {
        this.typingIndicator.classList.add('active');
        // Update messages height ketika typing indicator muncul
        this.updateMessagesHeight();
        this.scrollToBottom();
      }

      hideTyping() {
        this.typingIndicator.classList.remove('active');
        // Update messages height ketika typing indicator hilang
        this.updateMessagesHeight();
      }

      scrollToBottom() {
        setTimeout(() => {
          this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
        }, 100);
      }

      async sendMessage() {
        const message = this.chatInput.value.trim();
        if (!message) return;

        // Add user message
        this.addMessage(message, true);
        this.chatInput.value = '';
        this.adjustTextareaHeight();

        // Disable send button
        this.chatSend.disabled = true;
        this.showTyping();

        try {
          // Prepare payload for n8n webhook
          const payload = {
            chatInput: message,
            sessionId: this.sessionId,
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href
          };

          // Send to n8n webhook
          const response = await fetch(this.webhookUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload)
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();
            console.log('Bot response:', data);
            // Hide typing indicator
            this.hideTyping();
                      
            // Add bot response
            const botMessage = data.output || data.response || data.message || 'Maaf, saya mengalami kesulitan memproses pertanyaan Anda. Silakan coba lagi.';
            this.addMessage(botMessage, false);

        } catch (error) {
            console.error('Error sending message:', error);
            this.hideTyping();
            this.addMessage('Maaf, terjadi kesalahan dalam menghubungi server. Silakan coba lagi nanti.', false);
        } finally {
          // Re-enable send button
          this.chatSend.disabled = false;
          this.chatInput.focus();
        }
      }
    }

    const carouselStates = {
        tab1: { currentIndex: 0, totalSlides: 2 },
        tab2: { currentIndex: 0, totalSlides: 2 },
        tab3: { currentIndex: 0, totalSlides: 1 }
    };

    function initCarousels() {
        Object.keys(carouselStates).forEach(tabId => {
            updateCarousel(tabId);
            createIndicators(tabId);
        });
    }

    function navigateCarousel(tabId, direction) {
        const state = carouselStates[tabId];
        const newIndex = state.currentIndex + direction;

        if (newIndex >= 0 && newIndex < state.totalSlides) {
            state.currentIndex = newIndex;
            updateCarousel(tabId);
        }
    }

    function updateCarousel(tabId) {
        const carousel = document.getElementById(`carousel-${tabId}`);
        const slides = carousel.querySelectorAll('.carousel-slide');
        const state = carouselStates[tabId];

        // Update slides
        slides.forEach((slide, index) => {
            slide.classList.toggle('active', index === state.currentIndex);
        });

        // Update navigation buttons
        const container = carousel.closest('.carousel-container');
        const prevBtn = container.querySelector('.prev button');
        const nextBtn = container.querySelector('.next button');

        prevBtn.disabled = state.currentIndex === 0;
        nextBtn.disabled = state.currentIndex === state.totalSlides - 1;

        // Update indicators
        updateIndicators(tabId);
    }

    function createIndicators(tabId) {
        const indicatorsContainer = document.getElementById(`indicators-${tabId}`);
        const state = carouselStates[tabId];

        indicatorsContainer.innerHTML = '';

        for (let i = 0; i < state.totalSlides; i++) {
            const indicator = document.createElement('button');
            indicator.onclick = () => {
                state.currentIndex = i;
                updateCarousel(tabId);
            };
            indicatorsContainer.appendChild(indicator);
        }
    }

    function updateIndicators(tabId) {
        const indicatorsContainer = document.getElementById(`indicators-${tabId}`);
        const indicators = indicatorsContainer.querySelectorAll('button');
        const state = carouselStates[tabId];

        indicators.forEach((indicator, index) => {
            indicator.classList.toggle('active', index === state.currentIndex);
        });
    }

    document.addEventListener('keydown', (e) => {
        const activeTab = document.querySelector('.tab-pane.active');
        if (!activeTab) return;

        const tabId = activeTab.id.replace('features-', '');

        if (e.key === 'ArrowLeft') {
            navigateCarousel(tabId, -1);
        } else if (e.key === 'ArrowRight') {
            navigateCarousel(tabId, 1);
        }
    });

    // Initialize chat widget when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new ChatWidget();
      initCarousels();
    });
  </script>

  <!-- Chart.js Initialization -->
  <script src="assets/js/chart-bab-empat-section-1.js"></script>
  <script src="assets/js/chart-bab-empat-section-2.js"></script>

  <!-- Table Initialization -->
  <script src="assets/js/table-bab-empat-section-1.js"></script>
  <script src="assets/js/table-bab-empat-section-2.js"></script>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>